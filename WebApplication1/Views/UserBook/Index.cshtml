@model IEnumerable<WebApplication1.Models.Book>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Kitaplar</h2>&nbsp;

<p>
    @if (Session["userid"] != null)
    {
        @Html.ActionLink("Yeni Kitap Ekle", "Create")
    }

</p>
<table class="table">
    <tr>
        <th>
            <h2>Kategori</h2>
        </th>&nbsp;
        <th>
            <h2>Kullanıcı</h2>
        </th>
        <th>
            <h2>Kitap&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</h2>
        </th>
        <th>
            <h2>Resim</h2>
        </th>
        <th>
            <h2>Yazar</h2>
        </th>
        <th>
            <h2>Yayınevi</h2>
        </th>
        <th>
            <h2>Kitap Hakkında</h2>
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Category.cname)&nbsp;&nbsp;
            </td>
            <td>
                <a href="/User/UserProfil/@item.user_id">@Html.DisplayFor(modelItem => item.User.u_name)</a>&nbsp;&nbsp;
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.b_name)&nbsp;&nbsp;
            </td>
            <td>
                <a href="/Home/BookDetails/@item.book_id"><img width="75" src="@item.photo" /></a>&nbsp;&nbsp;
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.writer)&nbsp;&nbsp;&nbsp;
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.p_house)&nbsp;&nbsp;
            </td>
            @if (item.aboutbook.Length > 15)
            {
                <td>
                    @Html.Raw(item.aboutbook.Substring(0, 15)) ...
                </td>

            }
            else
            {
                <td>
                    @Html.DisplayFor(modelItem => item.aboutbook)
                </td>
            }

            @if (Session["userid"] != null)
            {
                if (Convert.ToInt32(Session["userid"]) == item.user_id)
                {
                    <td>
                        @Html.ActionLink("Düzenle", "Edit", new { id = item.book_id })
                    </td>
                    <td>
                        @Html.ActionLink("Sil", "Delete", new { id = item.book_id })
                    </td>
                }
                <td>

                    @Html.ActionLink("Detay", "Details", new { id = item.book_id })

                </td>
            }



        </tr>
    }

</table>
